<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../paper-spinner/paper-spinner-behavior.html">

<link rel="import" href="spinkit-element-styles.html">

<!--
`<spinkit-element>`is a configurable spinner element based on [SpinKit](http://tobiasahlin.com/spinkit/).

    <spinkit-element name="circle" active></spinkit-element>

### Accessibility

Alt attribute should be set to provide adequate context for accessibility. If not provided,
it defaults to 'loading'.
Empty alt can be provided to mark the element as decorative if alternative content is provided
in another form (e.g. a text block following the spinner).

    <paper-spinner alt="Loading contacts list" active></paper-spinner>

### Styling

The following mixin is available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--spinkit-element-size` | Width/Height of the spinner | `{}`
`--spinkit-element-color` | Color of the spinner | `{}`

@demo demo/index.html
@hero hero.svg
-->
<dom-module id="spinkit-element">
  <template>
    <style include='spinkit-element-styles'>
      :host {
        display: inline-block;
        position: relative;
        width: var(--spinkit-element-size, 40px);
        height: var(--spinkit-element-size, 40px);
      }
    </style>

    <!-- TODO: finish active/aria integration from paper-spinner -->

    <!-- rotating plane -->
    <template is="dom-if" if="[[_checkSpinnerName(name, 'rotating-plane')]]" restamp>
      <div class="sk-rotating-plane"></div>
    </template>

    <!-- double bounce -->
    <template is="dom-if" if="[[_checkSpinnerName(name, 'double-bounce')]]" restamp>
      <div class="sk-double-bounce">
        <div class="sk-child sk-double-bounce1"></div>
        <div class="sk-child sk-double-bounce2"></div>
      </div>
    </template>

    <!-- wave -->
    <template is="dom-if" if="[[_checkSpinnerName(name, 'wave')]]" restamp>
      <div class="sk-wave">
        <div class="sk-rect sk-rect1"></div>
        <div class="sk-rect sk-rect2"></div>
        <div class="sk-rect sk-rect3"></div>
        <div class="sk-rect sk-rect4"></div>
        <div class="sk-rect sk-rect5"></div>
      </div>
    </template>

    <!-- wandering cubes -->
    <template is="dom-if" if="[[_checkSpinnerName(name, 'wandering-cubes')]]" restamp>
      <div class="sk-wandering-cubes">
        <div class="sk-cube sk-cube1"></div>
        <div class="sk-cube sk-cube2"></div>
      </div>
    </template>

    <!-- spinner pulse -->
    <template is="dom-if" if="[[_checkSpinnerName(name, 'spinner-pulse')]]" restamp>
      <div class="sk-spinner-pulse"></div>
    </template>

    <!-- chasing dots -->
    <template is="dom-if" if="[[_checkSpinnerName(name, 'chasing-dots')]]" restamp>
      <div class="sk-chasing-dots">
        <div class="sk-child sk-dot1"></div>
        <div class="sk-child sk-dot2"></div>
      </div>
    </template>

    <!-- three bounce -->
    <template is="dom-if" if="[[_checkSpinnerName(name, 'three-bounce')]]" restamp>
      <div class="sk-three-bounce">
        <div class="sk-child sk-bounce1"></div>
        <div class="sk-child sk-bounce2"></div>
        <div class="sk-child sk-bounce3"></div>
      </div>
    </template>

    <!-- circle -->
    <template is="dom-if" if="[[_checkSpinnerName(name, 'circle')]]" restamp>
      <div class="sk-circle">
        <div class="sk-circle1 sk-child"></div>
        <div class="sk-circle2 sk-child"></div>
        <div class="sk-circle3 sk-child"></div>
        <div class="sk-circle4 sk-child"></div>
        <div class="sk-circle5 sk-child"></div>
        <div class="sk-circle6 sk-child"></div>
        <div class="sk-circle7 sk-child"></div>
        <div class="sk-circle8 sk-child"></div>
        <div class="sk-circle9 sk-child"></div>
        <div class="sk-circle10 sk-child"></div>
        <div class="sk-circle11 sk-child"></div>
        <div class="sk-circle12 sk-child"></div>
      </div>
    </template>

    <!-- cube grid -->
    <template is="dom-if" if="[[_checkSpinnerName(name, 'cube-grid')]]" restamp>
      <div class="sk-cube-grid">
        <div class="sk-cube sk-cube1"></div>
        <div class="sk-cube sk-cube2"></div>
        <div class="sk-cube sk-cube3"></div>
        <div class="sk-cube sk-cube4"></div>
        <div class="sk-cube sk-cube5"></div>
        <div class="sk-cube sk-cube6"></div>
        <div class="sk-cube sk-cube7"></div>
        <div class="sk-cube sk-cube8"></div>
        <div class="sk-cube sk-cube9"></div>
      </div>
    </template>

    <!-- fading circle -->
    <template is="dom-if" if="[[_checkSpinnerName(name, 'fading-circle')]]" restamp>
      <div class="sk-fading-circle">
        <div class="sk-circle1 sk-circle"></div>
        <div class="sk-circle2 sk-circle"></div>
        <div class="sk-circle3 sk-circle"></div>
        <div class="sk-circle4 sk-circle"></div>
        <div class="sk-circle5 sk-circle"></div>
        <div class="sk-circle6 sk-circle"></div>
        <div class="sk-circle7 sk-circle"></div>
        <div class="sk-circle8 sk-circle"></div>
        <div class="sk-circle9 sk-circle"></div>
        <div class="sk-circle10 sk-circle"></div>
        <div class="sk-circle11 sk-circle"></div>
        <div class="sk-circle12 sk-circle"></div>
      </div>
    </template>

    <!-- folding cube -->
    <template is="dom-if" if="[[_checkSpinnerName(name, 'folding-cube')]]" restamp>
      <div class="sk-folding-cube">
        <div class="sk-cube1 sk-cube"></div>
        <div class="sk-cube2 sk-cube"></div>
        <div class="sk-cube4 sk-cube"></div>
        <div class="sk-cube3 sk-cube"></div>
      </div>
    </template>


  </template>
  <script>
    (function() {
      var spinnerNames = [
        'rotating-plane',
        'double-bounce',
        'wave',
        'wandering-cubes',
        'spinner-pulse',
        'chasing-dots',
        'three-bounce',
        'circle',
        'cube-grid',
        'fading-circle',
        'folding-cube'
      ];

      Polymer({
        is: 'spinkit-element',

        behaviors: [
          Polymer.PaperSpinnerBehavior
        ],

        properties: {
          /**
           * Specifies the name of the spinner to be used.
           */
          name: {
            type: String,
            value: 'circle'
          },
          /**
           * Specifies the size of the spinner to be used.
           */
          size: {
            type: Number,
            observer: '_onSizeChanged'
          },
          /**
           * Specifies the size of the spinner to be used.
           */
          color: {
            type: String,
            observer: '_onColorChanged'
          },
        },

        _checkSpinnerName: function(givenName, spinnerName) {
          if (spinnerNames.indexOf(givenName) == -1) {
            givenName = 'circle';
          }
          return givenName === spinnerName;
        },

        _onSizeChanged: function(size) {
          this.customStyle['--spinkit-element-size'] = size+"px";
          this.updateStyles();
        },
        _onColorChanged: function(color) {
          this.customStyle['--spinkit-element-color'] = color;
          this.updateStyles();
        },
      });
    }());
  </script>
</dom-module>

